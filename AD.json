{"status": {"state": "ACTIVE", "message_list": [], "description": "", "resources": {"service_definition_list": [{"singleton": false, "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "e910f788-a0a9-4835-82a9-222eefc66605", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Sleep", "uuid": "69035b22-66ce-405b-a674-a037e13e2158"}, {"kind": "app_task", "name": "InstallAD", "uuid": "0147ca4a-b66d-4d39-86a7-9242efc5f421"}, {"kind": "app_task", "name": "Wait for VM", "uuid": "aae3291e-4ea9-9806-01c5-25eb01b0f724"}, {"kind": "app_task", "name": "Firewall Ports", "uuid": "4c342a86-5368-9ea2-9cb1-dd3c20620911"}], "name": "e8ae6024_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Sleep", "uuid": "69035b22-66ce-405b-a674-a037e13e2158"}, "edge_type": "user_defined", "type": "", "uuid": "70991e09-7bf0-4826-8815-de7727246176", "to_task_reference": {"kind": "app_task", "name": "InstallAD", "uuid": "0147ca4a-b66d-4d39-86a7-9242efc5f421"}}, {"from_task_reference": {"kind": "app_task", "name": "InstallAD", "uuid": "0147ca4a-b66d-4d39-86a7-9242efc5f421"}, "edge_type": "user_defined", "type": "", "uuid": "e202cd62-e605-b283-161a-cb88e8c3ec90", "to_task_reference": {"kind": "app_task", "name": "Wait for VM", "uuid": "aae3291e-4ea9-9806-01c5-25eb01b0f724"}}, {"from_task_reference": {"kind": "app_task", "name": "Wait for VM", "uuid": "aae3291e-4ea9-9806-01c5-25eb01b0f724"}, "edge_type": "user_defined", "type": "", "uuid": "04ce9965-d7db-9ac6-8a46-6cb5098d6594", "to_task_reference": {"kind": "app_task", "name": "Firewall Ports", "uuid": "4c342a86-5368-9ea2-9cb1-dd3c20620911"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2e4b80d6-703d-470f-8970-7363c4bba0b0"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Sleep", "state": "NOT_VALIDATED", "attrs": {"script": "#script\nsleep(50)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "69035b22-66ce-405b-a674-a037e13e2158"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "InstallAD", "state": "NOT_VALIDATED", "attrs": {"script": "##############################################\n# Name        : ActiveDirectoryBundle.ps1\n# Author      : K Sarath Kumar\n# Version     : 1.0\n# Description : Installs and configures domain controller features AD, CDC, ADC & RODC.\n##############################################\n\n$WS2008R2_MAJOR                 = '6.1'\n$WS2012_MAJOR                   = '6.2'\n$WS2012R2_MAJOR                 = '6.3'\n$WS2016_MAJOR                   = '10.0'\n\n# -*- Checks AD Domain services Installation\nfunction Check-ActiveDirectoryFeature {\n   return $(Get-WindowsFeature AD-Domain-Services -ErrorAction SilentlyContinue).Installed\n}\n# -*- Installs AD Domain services\nfunction Install-ActiveDirectory {\n  Write-Output \"Installing AD Features.\"\n  Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools\n}\n# -*- Checks the pre existance of domain\nfunction Check-DomainExistance {\n  #if (Get-ADDomainController -Discover -ErrorAction SilentlyContinue){\n  if (\"$((wmic ComputerSystem get DomainRole)[2])\".trim() -eq \"5\"){\n   return $true\n  } else{\n    return $false\n  }\n}\n\n# -*- Configures AD Domain service\nfunction Configure-ActiveDirectory {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$false)]\n      [string]$DatabasePath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainMode,\n      [parameter(Mandatory=$true)]\n      [string]$ForestMode,\n      [parameter(Mandatory=$false)]\n      [string]$LogPath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$false)]\n      [string]$SysvolPath=\"C:\\Windows\\SYSVOL\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainType,\n      [parameter(Mandatory=$false)]\n      [string]$ChildDomainName\n  )\n  Import-Module ADDSDeployment\n\n  $secpasswd = ConvertTo-SecureString $Password -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"$DomainName\\administrator\",$secpasswd)\n  $netbios = $DomainName.Split(\".\")[0].ToUpper()\n  Write-Output \"Configuring Domain services.\"\n  switch ($DomainType){\n    \"DC\"{\n      Install-ADDSForest -CreateDnsDelegation:$false -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainName $DomainName -DomainNetbiosName $netbios -ForestMode $ForestMode -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd\n    }\n    \"ADC\"{\n      Install-ADDSDomainController -NoGlobalCatalog:$false -CreateDnsDelegation:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"CDC\"{\n      Install-ADDSDomain -NoGlobalCatalog:$false -CreateDnsDelegation:$true -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainType \"ChildDomain\" -InstallDns:$true -LogPath $LogPath -NewDomainName $ChildDomainName -NewDomainNetbiosName $ChildDomainName.ToUpper() -ParentDomainName $DomainName -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"RODC\"{\n      Install-ADDSDomainController -AllowPasswordReplicationAccountName @(\"$netbios\\Allowed RODC Password Replication Group\") -NoGlobalCatalog:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DenyPasswordReplicationAccountName @(\"BUILTIN\\Administrators\", \"BUILTIN\\Server Operators\", \"BUILTIN\\Backup Operators\", \"BUILTIN\\Account Operators\", \"$netbios\\Denied RODC Password Replication Group\") -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -ReadOnlyReplica:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    default{\n      Write-Output \"Invalid DomainType\"\n    }\n}\n}\n# -*- Cheking Exitance of Active directory Feature.\nif (Check-ActiveDirectoryFeature){\n  Write-Output \"Active Directory already installed.\"\n} else{\n  Install-ActiveDirectory\n}\n\nif (Check-DomainExistance){\n  Write-Output \"Domain exists already.\"\n} else{\n  $MajorOSVersion= [string](Get-WmiObject Win32_OperatingSystem | Select-Object @{n=\"Major\";e={($_.Version.Split(\".\")[0]+\".\"+$_.Version.Split(\".\")[1])}}).Major\n  if ($MajorOSVersion -eq $WS2012R2_MAJOR){\n    $DomainMode = \"Win2012R2\"\n  } elseif ($MajorOSVersion -eq $WS2016_MAJOR){\n    $DomainMode = \"WinThreshold\"\n  }\n  Configure-ActiveDirectory -DomainName \"@@{DOMAIN}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -DomainMode $DomainMode -ForestMode $DomainMode -DomainType \"@@{DOMAIN_TYPE}@@\" -ChildDomainName \"@@{CHILD_DOMAIN}@@\"\n}\nStart-Sleep -Seconds 5\n\nRestart-Computer -Force -AsJob\nexit 0", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0147ca4a-b66d-4d39-86a7-9242efc5f421"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Wait for VM", "state": "NOT_VALIDATED", "attrs": {"script": "#script\nsleep(90)", "type": "", "command_line_args": "", "exit_status": [], "script_type": "static"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "aae3291e-4ea9-9806-01c5-25eb01b0f724"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Firewall Ports", "state": "NOT_VALIDATED", "attrs": {"script": "New-NetFirewallRule -DisplayName \"AD\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 389 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"GC TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 3268 -Action allow\nNew-NetFirewallRule -DisplayName \"GC UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 3269 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 139 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 138 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 88 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 464 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 464 -Action allow", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "4c342a86-5368-9ea2-9cb1-dd3c20620911"}], "description": "", "name": "170603f6_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "e8ae6024_dag", "uuid": "2e4b80d6-703d-470f-8970-7363c4bba0b0"}, "message_list": [], "variable_list": [], "uuid": "7093db5e-1625-4448-8511-8f80d5056a5f"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes created VMs as well", "type": "system", "uuid": "40d17b11-d8d6-459d-8ddb-c26a5b0e97df", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "f25e9ca6_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "55de5e91-4c08-4f58-9e58-f2ba4203f68c"}], "description": "", "name": "017e6fe9_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "f25e9ca6_dag", "uuid": "55de5e91-4c08-4f58-9e58-f2ba4203f68c"}, "message_list": [], "variable_list": [], "uuid": "92549ea5-97ff-416a-b157-01cc291fc783"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "10733e37-40c4-487b-8984-57b5e8d192d4", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "7cd4b387_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ad2ab647-bb5d-4e98-b7d9-f5af6e6b684f"}], "description": "", "name": "73434119_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7cd4b387_dag", "uuid": "ad2ab647-bb5d-4e98-b7d9-f5af6e6b684f"}, "message_list": [], "variable_list": [], "uuid": "1c14caa0-6000-4f78-a77d-fc2d48f6b5c7"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "957ad2d5-f415-4fc5-b4b2-eab973ba2bbd", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "83f2a218_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "01b036a6-0cf7-4c8b-a784-1c9dd4346fd5"}], "description": "", "name": "35799808_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "83f2a218_dag", "uuid": "01b036a6-0cf7-4c8b-a784-1c9dd4346fd5"}, "message_list": [], "variable_list": [], "uuid": "3b1c9104-8077-48be-9ac9-3619a3edece1"}, "message_list": [], "name": "action_stop"}, {"description": "System action for restarting an application", "type": "system", "uuid": "12fa0733-ab3c-4503-b8c7-ca05f59c3db0", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "7078cac1_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "371a7318-a272-4d29-a1c4-11151e7a07d6"}], "description": "", "name": "0d16f818_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "7078cac1_dag", "uuid": "371a7318-a272-4d29-a1c4-11151e7a07d6"}, "message_list": [], "variable_list": [], "uuid": "f8d44e62-2684-408c-8143-01e038b26ba1"}, "message_list": [], "name": "action_restart"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "294b9385-d062-4872-89ce-d1f3ffbbb096", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Service_Element_Delete_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "66ed7e94-8e7d-48e8-9666-464072eeb548"}], "name": "SYS_GEN__DAG_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "15033e7d-2b5c-4662-8d6f-042fdca3025a"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Service_Element_Delete_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "66ed7e94-8e7d-48e8-9666-464072eeb548"}], "description": "", "name": "SYS_GEN__Runbook_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "15033e7d-2b5c-4662-8d6f-042fdca3025a"}, "message_list": [], "variable_list": [], "uuid": "3e409bb6-9883-4900-a89f-5adc3f7492ec"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "Active_Directory", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [], "description": ""}], "substrate_definition_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "06fc0d07-70d5-47d5-8177-49eb3f0bab68", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "65955b3e-c39f-4e56-8448-f3c88bfba67c"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "a1584bb3-755a-4ddc-b781-6f1e46f3d0d7"}], "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "65955b3e-c39f-4e56-8448-f3c88bfba67c"}, "edge_type": "inherent", "type": "", "uuid": "afce33ba-2a1d-45e7-9bf7-a31d5fe887d2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "a1584bb3-755a-4ddc-b781-6f1e46f3d0d7"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "19ad5902-0e45-458b-b68e-23f7eeeb3376"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"name": "AD-DC01", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [{"ip": "@@{STATIC_IP}@@", "type": "ASSIGNED"}], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "cdcb4580-54b3-4efc-9d6d-c23d3e51c3ea"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": null, "type": "", "sysprep": {"install_type": "PREPARED", "unattend_xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-TCPIP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <Interfaces>\n            <Interface wcm:action=\"add\">\n               <Identifier>Ethernet</Identifier>\n               <Ipv4Settings>\n                  <DhcpEnabled>false</DhcpEnabled>\n                  <RouterDiscoveryEnabled>true</RouterDiscoveryEnabled>\n                  <Metric>30</Metric>\n               </Ipv4Settings>\n               <UnicastIpAddresses>\n                  <IpAddress wcm:action=\"add\" wcm:keyValue=\"1\">@@{STATIC_IP}@@/@@{PREFIX}@@</IpAddress>\n               </UnicastIpAddresses>\n               <Routes>\n                  <Route wcm:action=\"add\">\n                     <Identifier>10</Identifier>\n                     <Metric>20</Metric>\n                     <NextHopAddress>@@{GATEWAY}@@</NextHopAddress>\n                     <Prefix>0.0.0.0/0</Prefix>\n                  </Route>\n               </Routes>\n            </Interface>\n         </Interfaces>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false</fDenyTSConnections>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0</UserAuthentication>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true</Active>\n               <Profile>all</Profile>\n               <Group>@FirewallAPI.dll,-28752</Group>\n            </FirewallGroup>\n         </FirewallGroups>\n      </component>\n   </settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </AdministratorPassword>\n         </UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </Password>\n            <Enabled>true</Enabled>\n            <Username>Administrator</Username>\n         </AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe /c netsh firewall add portopening TCP 5985 \"Port 5985\"</CommandLine>\n               <Description>Win RM port open</Description>\n               <Order>1</Order>\n               <RequiresUserInput>true</RequiresUserInput>\n            </SynchronousCommand>\n         </FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true</HideEULAPage>\n            <SkipMachineOOBE>true</SkipMachineOOBE>\n         </OOBE>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US</InputLocale>\n         <SystemLocale>en-US</SystemLocale>\n         <UILanguageFallback>en-us</UILanguageFallback>\n         <UILanguage>en-US</UILanguage>\n         <UserLocale>en-US</UserLocale>\n      </component>\n   </settings>\n</unattend>", "type": ""}}, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016-Base", "uuid": "7833ea8b-3bed-4955-9c3c-919b52581ea5"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "timeout_secs": "0", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "65955b3e-c39f-4e56-8448-f3c88bfba67c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "a1584bb3-755a-4ddc-b781-6f1e46f3d0d7"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "19ad5902-0e45-458b-b68e-23f7eeeb3376"}, "message_list": [], "variable_list": [], "uuid": "74a7cc2e-63f4-4561-b35c-cae256b5fdf2"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "0498419c-b3c3-4683-858a-2f6b44524cd8", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "45d06940-5dce-43b9-82df-794acd2c1fe2"}, {"kind": "app_task", "name": "check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "03cbc668-1c04-4a2c-a994-7d229053b901"}], "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "45d06940-5dce-43b9-82df-794acd2c1fe2"}, "edge_type": "inherent", "type": "", "uuid": "1d995baf-c3c1-42e4-b97b-dfd4d25dd7f0", "to_task_reference": {"kind": "app_task", "name": "check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "03cbc668-1c04-4a2c-a994-7d229053b901"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6417f53b-9aab-4021-a6be-84b8b8c4c8ce"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "45d06940-5dce-43b9-82df-794acd2c1fe2"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "03cbc668-1c04-4a2c-a994-7d229053b901"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "6417f53b-9aab-4021-a6be-84b8b8c4c8ce"}, "message_list": [], "variable_list": [], "uuid": "c004d0e7-fa57-410f-aebc-a2b4b2e54646"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for suspending an application", "type": "system", "uuid": "e855628e-9ab0-480d-8b9b-202d909b3567", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "3ab97670-5b70-49a2-984b-14599f32ec26"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "3ab97670-5b70-49a2-984b-14599f32ec26"}, "message_list": [], "variable_list": [], "uuid": "c5a75b89-29c3-4840-b371-a873e60e49f0"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "aa87633b-7f08-4295-964b-59bb7ba4c7e4", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "84151693-6a59-4413-aac5-359866b80e57"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "84151693-6a59-4413-aac5-359866b80e57"}, "message_list": [], "variable_list": [], "uuid": "ecbfa012-85e6-4ef9-9903-2b5cc24df012"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "20692347-7301-444b-9e6d-85249ff5bc53", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "d94d4fce-cb68-4aaa-b176-667132078bc5"}], "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "3824f73c-3ab6-4c84-8816-2adcd55683d9"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "d94d4fce-cb68-4aaa-b176-667132078bc5"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "3824f73c-3ab6-4c84-8816-2adcd55683d9"}, "message_list": [], "variable_list": [], "uuid": "3a970da5-dab1-44a4-be1a-4cf6145d4f08"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "54785f39-d65b-4d16-9170-59c3cc6337a7", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "12f48e5c-bbc6-4f10-ad70-94ab2c23284c"}], "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0b224d55-5442-4c2f-a601-f839bbd6c086"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "12f48e5c-bbc6-4f10-ad70-94ab2c23284c"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "0b224d55-5442-4c2f-a601-f839bbd6c086"}, "message_list": [], "variable_list": [], "uuid": "fc2c5833-13cc-432f-9eaf-e1c957d0ed08"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "5b26f1c6-5e62-4b5f-a514-97ec89ae37c1", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "9cd960f6-e6e8-47ed-86b4-3fc58a56fd91"}], "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9a63ffde-e059-405e-adf0-a81b54f9eca9"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "9cd960f6-e6e8-47ed-86b4-3fc58a56fd91"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "9a63ffde-e059-405e-adf0-a81b54f9eca9"}, "message_list": [], "variable_list": [], "uuid": "127a8d2b-2d87-48b0-a5ef-ab74442116a4"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for restarting an application", "type": "system", "uuid": "6adb38bd-4e6f-4796-a4e1-f98c4c0c659f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "82ce3bc5-8c2e-4af1-b009-ddd89f42d028"}, {"kind": "app_task", "name": "check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "9ecad009-9999-43d2-988e-7dabc09dc428"}], "name": "SYS_GEN__DAG_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_Restart_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "82ce3bc5-8c2e-4af1-b009-ddd89f42d028"}, "edge_type": "inherent", "type": "", "uuid": "61d31c08-320b-4a70-813c-35e5c4efb3a3", "to_task_reference": {"kind": "app_task", "name": "check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "9ecad009-9999-43d2-988e-7dabc09dc428"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "da38acde-de69-4afa-a455-e52aca4a657f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_Restart_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "82ce3bc5-8c2e-4af1-b009-ddd89f42d028"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_ActiveDirectory_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "9ecad009-9999-43d2-988e-7dabc09dc428"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "da38acde-de69-4afa-a455-e52aca4a657f"}, "message_list": [], "variable_list": [], "uuid": "dcd47431-05f4-4977-8c68-9a5e66b34a59"}, "message_list": [], "name": "action_restart"}], "type": "AHV_VM", "name": "ActiveDirectory", "state": "ACTIVE", "readiness_probe": {"connection_type": "POWERSHELL", "disable_readiness_probe": false, "connection_port": 5985, "timeout_secs": "300", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "editables": {"readiness_probe": {"connection_type": true, "connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"ip_endpoint_list": {"0": {"ip": true}}, "subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"0": {"data_source_reference": true, "device_properties": {"device_type": true, "disk_address": {"adapter_type": true}}}}}}}, "os_type": "Windows", "message_list": [], "create_spec": {"name": "AD-CDC02", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [{"ip": "@@{STATIC_IP}@@", "type": "ASSIGNED"}], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "cdcb4580-54b3-4efc-9d6d-c23d3e51c3ea"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": null, "type": "", "sysprep": {"install_type": "PREPARED", "unattend_xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-TCPIP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <Interfaces>\n            <Interface wcm:action=\"add\">\n               <Identifier>Ethernet</Identifier>\n               <Ipv4Settings>\n                  <DhcpEnabled>false</DhcpEnabled>\n                  <RouterDiscoveryEnabled>true</RouterDiscoveryEnabled>\n                  <Metric>30</Metric>\n               </Ipv4Settings>\n               <UnicastIpAddresses>\n                  <IpAddress wcm:action=\"add\" wcm:keyValue=\"1\">@@{STATIC_IP}@@/@@{PREFIX}@@</IpAddress>\n               </UnicastIpAddresses>\n               <Routes>\n                  <Route wcm:action=\"add\">\n                     <Identifier>10</Identifier>\n                     <Metric>20</Metric>\n                     <NextHopAddress>@@{GATEWAY}@@</NextHopAddress>\n                     <Prefix>0.0.0.0/0</Prefix>\n                  </Route>\n               </Routes>\n            </Interface>\n         </Interfaces>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false</fDenyTSConnections>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0</UserAuthentication>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true</Active>\n               <Profile>all</Profile>\n               <Group>@FirewallAPI.dll,-28752</Group>\n            </FirewallGroup>\n         </FirewallGroups>\n      </component>\n   </settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </AdministratorPassword>\n         </UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </Password>\n            <Enabled>true</Enabled>\n            <Username>Administrator</Username>\n         </AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe /c netsh firewall add portopening TCP 5985 \"Port 5985\"</CommandLine>\n               <Description>Win RM port open</Description>\n               <Order>1</Order>\n               <RequiresUserInput>true</RequiresUserInput>\n            </SynchronousCommand>\n         </FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true</HideEULAPage>\n            <SkipMachineOOBE>true</SkipMachineOOBE>\n         </OOBE>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US</InputLocale>\n         <SystemLocale>en-US</SystemLocale>\n         <UILanguageFallback>en-us</UILanguageFallback>\n         <UILanguage>en-US</UILanguage>\n         <UserLocale>en-US</UserLocale>\n      </component>\n   </settings>\n</unattend>", "type": ""}}, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016-Base", "uuid": "7833ea8b-3bed-4955-9c3c-919b52581ea5"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "variable_list": [], "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}], "credential_definition_list": [{"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "LOCAL", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "PASSWORD", "uuid": "026beee0-4a1e-470d-8345-ff031082c748"}, {"username": "administrator@contoso.com", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "DOMAIN_CRED", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "PASSWORD", "uuid": "1781ca00-e99d-4eff-9798-3f6a64249e33"}], "package_definition_list": [{"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "26ea38d1-d553-4217-be5c-b6f5f1245a92", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_bf441df6_3e1b_46ef_ac74_114ebcee4651", "uuid": "c9afed29-5432-47a2-ae29-30801e397195"}], "name": "SYS_GEN__DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f8c43f9d-e112-4768-af76-5d906bec3478"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_bf441df6_3e1b_46ef_ac74_114ebcee4651", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Set Hostname", "uuid": "2c142169-34bd-4c09-a37d-01ccc534b479"}], "name": "80dbbb84_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5c161ed0-416d-480c-ab53-0051cb0d4eee"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Set Hostname", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"@@{name}@@\"\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Output \"Hostname already set.\"\n  }\n  else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Output \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n#Restart-Computer -Force -AsJob\nshutdown.exe /r /t 5\nexit 0", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2c142169-34bd-4c09-a37d-01ccc534b479"}], "description": "", "name": "5c108f0d_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "80dbbb84_dag", "uuid": "5c161ed0-416d-480c-ab53-0051cb0d4eee"}, "message_list": [], "variable_list": [], "uuid": "b985a3f7-8e2a-42ed-b000-411ebf044098"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6f292b4a_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6dfb95b2-e93b-4de2-9a81-c8ecd5468923"}], "description": "", "name": "1f35f88e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6f292b4a_dag", "uuid": "6dfb95b2-e93b-4de2-9a81-c8ecd5468923"}, "message_list": [], "variable_list": [], "uuid": "e7359f40-3454-4da7-a734-90401c357c3b"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "c9afed29-5432-47a2-ae29-30801e397195"}], "description": "", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "f8c43f9d-e112-4768-af76-5d906bec3478"}, "message_list": [], "variable_list": [], "uuid": "83efaca5-2941-4072-98b5-c14f0637f59e"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "810bf625-521f-4625-840d-6b7a98f6d2ac", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "bd9e77be-59f5-43a1-b507-de3b9c4e150c"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "7c147bf0-6033-41a9-8d1e-a1cdb162a174"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "a181961d-220e-40d2-94c8-7b93501467ca"}], "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "7c147bf0-6033-41a9-8d1e-a1cdb162a174"}, "edge_type": "inherent", "type": "", "uuid": "9006ff85-e47c-40fb-8938-3d5ee7964805", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "a181961d-220e-40d2-94c8-7b93501467ca"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "bd9e77be-59f5-43a1-b507-de3b9c4e150c"}, "edge_type": "inherent", "type": "", "uuid": "479b5255-75d2-4533-ac0f-ff7c8698302b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "7c147bf0-6033-41a9-8d1e-a1cdb162a174"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "75592ea6-a78d-454c-a120-811724c1ebdc"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "83efaca5-2941-4072-98b5-c14f0637f59e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bd9e77be-59f5-43a1-b507-de3b9c4e150c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "170603f6_runbook", "uuid": "7093db5e-1625-4448-8511-8f80d5056a5f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7c147bf0-6033-41a9-8d1e-a1cdb162a174"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73434119_runbook", "uuid": "1c14caa0-6000-4f78-a77d-fc2d48f6b5c7"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a181961d-220e-40d2-94c8-7b93501467ca"}], "description": "", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "75592ea6-a78d-454c-a120-811724c1ebdc"}, "message_list": [], "variable_list": [], "uuid": "c21b4213-db2d-4a86-84d4-84e187f18c7c"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "e75a0451-71d2-47fd-8a87-6f1f63219b38", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_bf441df6_3e1b_46ef_ac74_114ebcee4651", "uuid": "ecda3121-65b9-4057-adfe-17e0e6608028"}], "name": "SYS_GEN__DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b2902a33-f1a6-403c-aeaa-79c98b4f57cc"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_bf441df6_3e1b_46ef_ac74_114ebcee4651", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Set Hostname", "uuid": "2c142169-34bd-4c09-a37d-01ccc534b479"}], "name": "80dbbb84_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5c161ed0-416d-480c-ab53-0051cb0d4eee"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Set Hostname", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"@@{name}@@\"\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Output \"Hostname already set.\"\n  }\n  else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Output \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n#Restart-Computer -Force -AsJob\nshutdown.exe /r /t 5\nexit 0", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2c142169-34bd-4c09-a37d-01ccc534b479"}], "description": "", "name": "5c108f0d_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "80dbbb84_dag", "uuid": "5c161ed0-416d-480c-ab53-0051cb0d4eee"}, "message_list": [], "variable_list": [], "uuid": "b985a3f7-8e2a-42ed-b000-411ebf044098"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6f292b4a_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6dfb95b2-e93b-4de2-9a81-c8ecd5468923"}], "description": "", "name": "1f35f88e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6f292b4a_dag", "uuid": "6dfb95b2-e93b-4de2-9a81-c8ecd5468923"}, "message_list": [], "variable_list": [], "uuid": "e7359f40-3454-4da7-a734-90401c357c3b"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "ecda3121-65b9-4057-adfe-17e0e6608028"}], "description": "", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "b2902a33-f1a6-403c-aeaa-79c98b4f57cc"}, "message_list": [], "variable_list": [], "uuid": "8fff702c-4938-4391-8e98-90e876448d82"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "97bcddb8-d0ba-486d-a7db-6d8616361986", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "c99e300d-ff3a-45fc-919d-4ffcc3530e52"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "dc5bfff0-b1b2-4104-af64-b379bed0dbe8"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "b41cd62e-3ca9-44c1-8a95-4bbf90f58695"}], "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "c99e300d-ff3a-45fc-919d-4ffcc3530e52"}, "edge_type": "inherent", "type": "", "uuid": "746bbad0-27b3-41c0-9d82-30fc662d1208", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "dc5bfff0-b1b2-4104-af64-b379bed0dbe8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "dc5bfff0-b1b2-4104-af64-b379bed0dbe8"}, "edge_type": "inherent", "type": "", "uuid": "53ce6779-657b-4ee0-b849-0f9c80f7d9b9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "b41cd62e-3ca9-44c1-8a95-4bbf90f58695"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "bf9714a1-489b-4ba8-bacc-6f4bab64664c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "35799808_runbook", "uuid": "3b1c9104-8077-48be-9ac9-3619a3edece1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c99e300d-ff3a-45fc-919d-4ffcc3530e52"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "017e6fe9_runbook", "uuid": "92549ea5-97ff-416a-b157-01cc291fc783"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "dc5bfff0-b1b2-4104-af64-b379bed0dbe8"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "8fff702c-4938-4391-8e98-90e876448d82"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b41cd62e-3ca9-44c1-8a95-4bbf90f58695"}], "description": "", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "bf9714a1-489b-4ba8-bacc-6f4bab64664c"}, "message_list": [], "variable_list": [], "uuid": "cf767d87-4770-41f1-8683-40313ec8c4ee"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "d60457f7-9157-42f8-89ba-a0de63c63037", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "9a80c13a-1b06-4167-b75d-a26994a091b6"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "3e82ef0f-44f8-483b-ac65-6a8fe1aab2d6"}], "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "9a80c13a-1b06-4167-b75d-a26994a091b6"}, "edge_type": "inherent", "type": "", "uuid": "3db4a526-a01b-426c-9457-9f02152c3c80", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "3e82ef0f-44f8-483b-ac65-6a8fe1aab2d6"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4eca3717-90df-4e96-b4cc-cac2275fc2a2"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "3e409bb6-9883-4900-a89f-5adc3f7492ec"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9a80c13a-1b06-4167-b75d-a26994a091b6"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "3e82ef0f-44f8-483b-ac65-6a8fe1aab2d6"}], "description": "", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "4eca3717-90df-4e96-b4cc-cac2275fc2a2"}, "message_list": [], "variable_list": [], "uuid": "e0c8840b-9a16-4ea3-ad7b-ed680fd36d16"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "ff6e86c9-9d3b-4e1f-b3be-13a352e9e969", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "9534e656-a5df-442c-baf0-d5c3abe94808"}], "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ef0c616b-c040-47a0-bff8-c9d168ba6813"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73434119_runbook", "uuid": "1c14caa0-6000-4f78-a77d-fc2d48f6b5c7"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9534e656-a5df-442c-baf0-d5c3abe94808"}], "description": "", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "ef0c616b-c040-47a0-bff8-c9d168ba6813"}, "message_list": [], "variable_list": [], "uuid": "1b10f23c-c48a-4ce2-96a0-6d43bdfdf333"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "e8da91c9-9e02-4f14-b57d-dd1c8c0da7ba", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "a50e6f76-48cb-49e9-9c73-76610f2c39c3"}], "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6c0845f3-4bcd-431f-b0ae-3aff373bea98"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "35799808_runbook", "uuid": "3b1c9104-8077-48be-9ac9-3619a3edece1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a50e6f76-48cb-49e9-9c73-76610f2c39c3"}], "description": "", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "6c0845f3-4bcd-431f-b0ae-3aff373bea98"}, "message_list": [], "variable_list": [], "uuid": "8e0d27fd-6dd2-4ff6-ab42-e85d5c9c0480"}, "message_list": [], "name": "action_stop"}, {"description": "System action for restarting an application", "type": "system", "uuid": "2e36f221-5fb0-4b9a-8a57-4948aef6af35", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "uuid": "db799711-cfd8-4c79-93be-da587603734e"}], "name": "SYS_GEN__Composite_DAG_Package_bf441df6_3e1b_46ef_ac74_114ebcee4651", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "dcfa2f37-e7e2-4c89-b811-75f06d693513"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0d16f818_runbook", "uuid": "f8d44e62-2684-408c-8143-01e038b26ba1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "db799711-cfd8-4c79-93be-da587603734e"}], "description": "", "name": "SYS_GEN__Runbook_Package_bf441df6_3e1b_46ef_ac74_114ebcee4651", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_bf441df6_3e1b_46ef_ac74_114ebcee4651", "uuid": "dcfa2f37-e7e2-4c89-b811-75f06d693513"}, "message_list": [], "variable_list": [], "uuid": "4f463a01-a721-4a0d-9679-8e19e4093f1a"}, "message_list": [], "name": "action_restart"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}], "name": "Active_Directory_Package", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Set Hostname", "uuid": "2c142169-34bd-4c09-a37d-01ccc534b479"}], "name": "80dbbb84_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5c161ed0-416d-480c-ab53-0051cb0d4eee"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Set Hostname", "state": "ACTIVE", "attrs": {"script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"@@{name}@@\"\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Output \"Hostname already set.\"\n  }\n  else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Output \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n#Restart-Computer -Force -AsJob\nshutdown.exe /r /t 5\nexit 0", "type": "", "command_line_args": "", "exit_status": [], "script_type": "sh"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "2c142169-34bd-4c09-a37d-01ccc534b479"}], "description": "", "name": "5c108f0d_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "80dbbb84_dag", "uuid": "5c161ed0-416d-480c-ab53-0051cb0d4eee"}, "message_list": [], "variable_list": [], "uuid": "b985a3f7-8e2a-42ed-b000-411ebf044098"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "6f292b4a_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6dfb95b2-e93b-4de2-9a81-c8ecd5468923"}], "description": "", "name": "1f35f88e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "6f292b4a_dag", "uuid": "6dfb95b2-e93b-4de2-9a81-c8ecd5468923"}, "message_list": [], "variable_list": [], "uuid": "e7359f40-3454-4da7-a734-90401c357c3b"}}, "variable_list": [], "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}], "app_profile_list": [{"deployment_create_list": [{"type": "GREENFIELD", "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "bf4945f3-d170-4d0b-95bb-531573391fee", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "f5d0aba4-3052-4c0b-b8c9-9fec9f346a52"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "145118c7-075e-4ebf-b3cd-07e5dfea80f1"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "2e382ec3-cb81-41ec-ad27-9bd7bed3ed9b"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "b232f02f-f587-4a64-9a8b-71fc68d1a8c0"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "88184bcb-d18e-4764-b764-281135979781"}], "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "b232f02f-f587-4a64-9a8b-71fc68d1a8c0"}, "edge_type": "inherent", "type": "", "uuid": "b6a9367a-3a6a-4820-9e13-b7ebc043b6bd", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "88184bcb-d18e-4764-b764-281135979781"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "2e382ec3-cb81-41ec-ad27-9bd7bed3ed9b"}, "edge_type": "inherent", "type": "", "uuid": "4157d955-dad6-458a-8516-6ad2a549b90f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "b232f02f-f587-4a64-9a8b-71fc68d1a8c0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "f5d0aba4-3052-4c0b-b8c9-9fec9f346a52"}, "edge_type": "inherent", "type": "", "uuid": "224efc1d-ca74-4b43-9f64-b254da4f9001", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "145118c7-075e-4ebf-b3cd-07e5dfea80f1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "145118c7-075e-4ebf-b3cd-07e5dfea80f1"}, "edge_type": "inherent", "type": "", "uuid": "b9f39f7f-0547-47fd-b563-3babb747acc1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "2e382ec3-cb81-41ec-ad27-9bd7bed3ed9b"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f674776e-d65b-4034-b15e-f8b0fe92ff8d"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "f5d0aba4-3052-4c0b-b8c9-9fec9f346a52"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "74a7cc2e-63f4-4561-b35c-cae256b5fdf2"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "145118c7-075e-4ebf-b3cd-07e5dfea80f1"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "83efaca5-2941-4072-98b5-c14f0637f59e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2e382ec3-cb81-41ec-ad27-9bd7bed3ed9b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "170603f6_runbook", "uuid": "7093db5e-1625-4448-8511-8f80d5056a5f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b232f02f-f587-4a64-9a8b-71fc68d1a8c0"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73434119_runbook", "uuid": "1c14caa0-6000-4f78-a77d-fc2d48f6b5c7"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "88184bcb-d18e-4764-b764-281135979781"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "f674776e-d65b-4034-b15e-f8b0fe92ff8d"}, "message_list": [], "variable_list": [], "uuid": "156b929e-04f3-4cca-85bc-541230bcb75b"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "cbe8fa87-8acf-4a0f-8d1b-6e47cee03215", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "def0e852-e91c-40ff-bd41-2f522952cda1"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "43711e79-e081-4805-a75f-0cd45af6f27f"}], "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "def0e852-e91c-40ff-bd41-2f522952cda1"}, "edge_type": "inherent", "type": "", "uuid": "1ddb6adb-2873-4968-acfc-3b868ec49cc6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "43711e79-e081-4805-a75f-0cd45af6f27f"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a657b774-2e97-4b08-936f-bbe713ab15f7"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "c004d0e7-fa57-410f-aebc-a2b4b2e54646"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "def0e852-e91c-40ff-bd41-2f522952cda1"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73434119_runbook", "uuid": "1c14caa0-6000-4f78-a77d-fc2d48f6b5c7"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "43711e79-e081-4805-a75f-0cd45af6f27f"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "a657b774-2e97-4b08-936f-bbe713ab15f7"}, "message_list": [], "variable_list": [], "uuid": "a66d7215-94b4-4939-8500-c7ce0f0f5a50"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "a60f0ada-64cb-4d8e-aecf-d2cd96ba34fe", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "db66c1f2-d62e-41c2-9963-35f3aed48237"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "6931075b-37f7-4ddf-be74-5ac98a7c21a5"}], "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "db66c1f2-d62e-41c2-9963-35f3aed48237"}, "edge_type": "inherent", "type": "", "uuid": "ecc24763-c2bb-4374-9061-d31014cb0ec1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "6931075b-37f7-4ddf-be74-5ac98a7c21a5"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "bcecfd3b-510e-42fb-8e90-df762e40b91b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "35799808_runbook", "uuid": "3b1c9104-8077-48be-9ac9-3619a3edece1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "db66c1f2-d62e-41c2-9963-35f3aed48237"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "3a970da5-dab1-44a4-be1a-4cf6145d4f08"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6931075b-37f7-4ddf-be74-5ac98a7c21a5"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "bcecfd3b-510e-42fb-8e90-df762e40b91b"}, "message_list": [], "variable_list": [], "uuid": "d8407ae3-0c52-4508-bb9a-e95497db1be7"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "d070e4df-c63e-420f-9575-d0ee334a716c", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "7bf9c3c2-f446-40fb-b14a-2a6f92c51cf9"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "2a0812ba-31e1-416b-bc3d-8a77f0ae6cb0"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "63f298df-dd05-4c38-85a0-f8934f2248b3"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "d8769c8d-8ec3-4ed8-a208-6b33552197b7"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "41704788-0537-4d43-9f63-eea39f4fd750"}], "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "7bf9c3c2-f446-40fb-b14a-2a6f92c51cf9"}, "edge_type": "inherent", "type": "", "uuid": "e3fbf2f9-ddc5-469f-963c-a2c149386a64", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "2a0812ba-31e1-416b-bc3d-8a77f0ae6cb0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "2a0812ba-31e1-416b-bc3d-8a77f0ae6cb0"}, "edge_type": "inherent", "type": "", "uuid": "089040a3-c6d5-42e8-a4b3-e9c9650509a7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "63f298df-dd05-4c38-85a0-f8934f2248b3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "63f298df-dd05-4c38-85a0-f8934f2248b3"}, "edge_type": "inherent", "type": "", "uuid": "d758103a-df21-4d96-ba62-66d31672e136", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "d8769c8d-8ec3-4ed8-a208-6b33552197b7"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "d8769c8d-8ec3-4ed8-a208-6b33552197b7"}, "edge_type": "inherent", "type": "", "uuid": "ae49b7db-b034-46bf-849f-3f0d2147ade1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "41704788-0537-4d43-9f63-eea39f4fd750"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "dbadd93f-770e-431f-a8e7-4ab7aeb7d665"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "35799808_runbook", "uuid": "3b1c9104-8077-48be-9ac9-3619a3edece1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7bf9c3c2-f446-40fb-b14a-2a6f92c51cf9"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "017e6fe9_runbook", "uuid": "92549ea5-97ff-416a-b157-01cc291fc783"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2a0812ba-31e1-416b-bc3d-8a77f0ae6cb0"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "8fff702c-4938-4391-8e98-90e876448d82"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "63f298df-dd05-4c38-85a0-f8934f2248b3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "fc2c5833-13cc-432f-9eaf-e1c957d0ed08"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d8769c8d-8ec3-4ed8-a208-6b33552197b7"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "41704788-0537-4d43-9f63-eea39f4fd750"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "dbadd93f-770e-431f-a8e7-4ab7aeb7d665"}, "message_list": [], "variable_list": [], "uuid": "8f3fcb70-1366-4001-a038-8dbef13a75bf"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "69e81c06-51f8-4b58-b544-6414f9d7ada4", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "fa029962-544b-46dd-af78-82997e4cc5c9"}], "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "008d39bf-92d7-4236-b01c-0fe9b93dbfcd"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "fa029962-544b-46dd-af78-82997e4cc5c9"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "008d39bf-92d7-4236-b01c-0fe9b93dbfcd"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "9dfba52b-2519-44c6-9c39-eb8dab1dc655"}], "uuid": "3f6b0183-0d4a-44db-8cf4-ba8f62f5b838"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "99b50c5d-d809-44c9-bb23-40f082e7612f", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "397221a0-3751-4baa-89d5-c9b59de21f05"}], "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a1787920-616a-4400-a207-898b0234ca7c"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "397221a0-3751-4baa-89d5-c9b59de21f05"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "a1787920-616a-4400-a207-898b0234ca7c"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "NOT_VALIDATED", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "07a10e3d-b426-4b64-b81b-ba118dad2ccb"}], "uuid": "4a750e72-fa8e-4e08-97e2-a0bd01ea9b7b"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "4d104a48-2a86-48ac-a989-fca8a27d0ebc", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "b93e2660-5b92-4541-91c9-11993d5d142c"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "7d795505-6fb9-4d55-b288-7ff890f7db4b"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "7870efae-ae81-479d-afbb-b4cd93874482"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "77bf717e-b6f0-4d6b-bbf7-5b1f4be1c54a"}], "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "b93e2660-5b92-4541-91c9-11993d5d142c"}, "edge_type": "inherent", "type": "", "uuid": "893017f1-f323-4354-ade1-27afd9d8a924", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "7d795505-6fb9-4d55-b288-7ff890f7db4b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "7870efae-ae81-479d-afbb-b4cd93874482"}, "edge_type": "inherent", "type": "", "uuid": "3ce74673-d9ba-4278-b506-572472575ae3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "77bf717e-b6f0-4d6b-bbf7-5b1f4be1c54a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "7d795505-6fb9-4d55-b288-7ff890f7db4b"}, "edge_type": "inherent", "type": "", "uuid": "c73ee7e7-ef65-401d-9e7b-ade936e08c6d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "7870efae-ae81-479d-afbb-b4cd93874482"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1c8f1d88-bdcb-4880-8297-33303e5c1b37"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "3e409bb6-9883-4900-a89f-5adc3f7492ec"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b93e2660-5b92-4541-91c9-11993d5d142c"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "7d795505-6fb9-4d55-b288-7ff890f7db4b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "127a8d2b-2d87-48b0-a5ef-ab74442116a4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7870efae-ae81-479d-afbb-b4cd93874482"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "77bf717e-b6f0-4d6b-bbf7-5b1f4be1c54a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "1c8f1d88-bdcb-4880-8297-33303e5c1b37"}, "message_list": [], "variable_list": [], "uuid": "9dd93b98-8de8-4491-92ed-d9d8bac0a54e"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for restarting an application", "type": "system", "uuid": "9e732e9d-0104-4638-aa8f-4f4204a6e927", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "ee288b96-a48a-4667-acc5-80d8a9261efe"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "uuid": "bb3eecd1-cf05-439a-a33f-cfccf19a285a"}], "name": "SYS_GEN__Composite_DAG_Deployment_db333066_7a11_411b_92e8_d0932f5e11da", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "ee288b96-a48a-4667-acc5-80d8a9261efe"}, "edge_type": "inherent", "type": "", "uuid": "627bb1dc-e430-436f-8020-dfecfb7d69d9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "uuid": "bb3eecd1-cf05-439a-a33f-cfccf19a285a"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "19452009-2dad-4501-b3b1-22efbcda5dbf"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "dcd47431-05f4-4977-8c68-9a5e66b34a59"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ee288b96-a48a-4667-acc5-80d8a9261efe"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0d16f818_runbook", "uuid": "f8d44e62-2684-408c-8143-01e038b26ba1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bb3eecd1-cf05-439a-a33f-cfccf19a285a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_db333066_7a11_411b_92e8_d0932f5e11da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_db333066_7a11_411b_92e8_d0932f5e11da", "uuid": "19452009-2dad-4501-b3b1-22efbcda5dbf"}, "message_list": [], "variable_list": [], "uuid": "6faaf45f-8c88-48ba-85f8-4fa31cdc60f9"}, "message_list": [], "name": "action_restart"}], "message_list": [], "editables": {}, "name": "1bd2d70a_deployment", "state": "ACTIVE", "max_replicas": "1", "package_local_reference_list": [{"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}], "substrate_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "min_replicas": "1", "variable_list": [], "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}], "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "9b6ed461-44c2-4fd4-8bfe-baa7d56b4b12", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "432558ac-6242-4fca-ab7c-c0c046fd6d70"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "38445e00-1705-4237-8aa4-e5360a4e7345"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "7dd4edc5-6321-4184-a586-0de71cdc6344"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "6649ecaa-908b-4b18-a4b2-a865a6a3575b"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "31c02802-5461-42a5-ba23-dccad45b4830"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "27e16f8b-ef34-44b3-bf03-9576cae4f8b0"}], "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "31c02802-5461-42a5-ba23-dccad45b4830"}, "edge_type": "inherent", "type": "", "uuid": "9b3722c3-c3f1-4708-bef3-c4cf4c8f902b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "27e16f8b-ef34-44b3-bf03-9576cae4f8b0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "6649ecaa-908b-4b18-a4b2-a865a6a3575b"}, "edge_type": "inherent", "type": "", "uuid": "c27e91e2-927f-4967-9d16-b16f136c4dc6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "31c02802-5461-42a5-ba23-dccad45b4830"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "38445e00-1705-4237-8aa4-e5360a4e7345"}, "edge_type": "inherent", "type": "", "uuid": "335db971-8d40-47e6-8835-9ef312193bb4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "7dd4edc5-6321-4184-a586-0de71cdc6344"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "7dd4edc5-6321-4184-a586-0de71cdc6344"}, "edge_type": "inherent", "type": "", "uuid": "cf79c410-cd04-4bc8-889d-ce0c25e589b9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "6649ecaa-908b-4b18-a4b2-a865a6a3575b"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "de0c7ada-6179-419a-b9f0-5d143527aad7"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "38445e00-1705-4237-8aa4-e5360a4e7345"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "74a7cc2e-63f4-4561-b35c-cae256b5fdf2"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7dd4edc5-6321-4184-a586-0de71cdc6344"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "83efaca5-2941-4072-98b5-c14f0637f59e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6649ecaa-908b-4b18-a4b2-a865a6a3575b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "170603f6_runbook", "uuid": "7093db5e-1625-4448-8511-8f80d5056a5f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "31c02802-5461-42a5-ba23-dccad45b4830"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73434119_runbook", "uuid": "1c14caa0-6000-4f78-a77d-fc2d48f6b5c7"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "27e16f8b-ef34-44b3-bf03-9576cae4f8b0"}], "description": "", "name": "SYS_GEN__Runbook_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "uuid": "de0c7ada-6179-419a-b9f0-5d143527aad7"}, "message_list": [], "variable_list": [], "uuid": "e80ac608-63b5-45da-9b95-7da89fc28a69"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "2ff5fda7-d35a-45b2-b9ad-32caa8e31018", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "432558ac-6242-4fca-ab7c-c0c046fd6d70"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "2f4dea05-13c8-4387-8e1e-b82e8c765c03"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "40507af4-38d1-4d1c-82e4-0d46e2ebc799"}], "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "2f4dea05-13c8-4387-8e1e-b82e8c765c03"}, "edge_type": "inherent", "type": "", "uuid": "a9aa3dd4-b774-4065-9189-613b2c25ee5c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "40507af4-38d1-4d1c-82e4-0d46e2ebc799"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "364c5422-62ab-423b-adb8-b1b1c7fe8d3a"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "c004d0e7-fa57-410f-aebc-a2b4b2e54646"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2f4dea05-13c8-4387-8e1e-b82e8c765c03"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "73434119_runbook", "uuid": "1c14caa0-6000-4f78-a77d-fc2d48f6b5c7"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "40507af4-38d1-4d1c-82e4-0d46e2ebc799"}], "description": "", "name": "SYS_GEN__Runbook_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "uuid": "364c5422-62ab-423b-adb8-b1b1c7fe8d3a"}, "message_list": [], "variable_list": [], "uuid": "b4d2f405-d93c-4e20-b989-0e9eeffd61a9"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "16ab2eef-d147-4f5f-8a2f-45f52736c9a2", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "432558ac-6242-4fca-ab7c-c0c046fd6d70"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "cb7fe1fe-b216-47c6-a4a7-aab262f4dc97"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "4eb73cd6-6c46-4eb9-8ee1-52cf54a2b627"}], "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "cb7fe1fe-b216-47c6-a4a7-aab262f4dc97"}, "edge_type": "inherent", "type": "", "uuid": "6fdfa718-35f9-46db-bf54-f812a24565c9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "4eb73cd6-6c46-4eb9-8ee1-52cf54a2b627"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "dfdbd301-5b0e-4607-bdff-ca03b7c349d4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "35799808_runbook", "uuid": "3b1c9104-8077-48be-9ac9-3619a3edece1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cb7fe1fe-b216-47c6-a4a7-aab262f4dc97"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "3a970da5-dab1-44a4-be1a-4cf6145d4f08"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4eb73cd6-6c46-4eb9-8ee1-52cf54a2b627"}], "description": "", "name": "SYS_GEN__Runbook_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "uuid": "dfdbd301-5b0e-4607-bdff-ca03b7c349d4"}, "message_list": [], "variable_list": [], "uuid": "3dd1928b-1e97-43dd-ad3f-bf2b8d1e8d9c"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "76b32d4e-cbf8-4ba6-a617-619037f3abc0", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "432558ac-6242-4fca-ab7c-c0c046fd6d70"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "ea482cca-14fa-46db-9b56-1c26d6271f32"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "e1f830b4-f4f2-4858-b61d-9c0d69e79182"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "43ce78cb-1d8f-4003-b96c-320b55854dc2"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "a65042f9-7d31-480a-97c7-eed1219edc0c"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "7d077418-7875-4569-ac52-e25739785968"}], "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "ea482cca-14fa-46db-9b56-1c26d6271f32"}, "edge_type": "inherent", "type": "", "uuid": "65b3e814-3120-4b88-b6a1-15750b8b4745", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "e1f830b4-f4f2-4858-b61d-9c0d69e79182"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "e1f830b4-f4f2-4858-b61d-9c0d69e79182"}, "edge_type": "inherent", "type": "", "uuid": "aa8f66aa-238d-48d9-84e2-52bd8f6f728c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "43ce78cb-1d8f-4003-b96c-320b55854dc2"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "43ce78cb-1d8f-4003-b96c-320b55854dc2"}, "edge_type": "inherent", "type": "", "uuid": "f7e89549-6af9-4b06-850f-2cf7326ebe98", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "a65042f9-7d31-480a-97c7-eed1219edc0c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "a65042f9-7d31-480a-97c7-eed1219edc0c"}, "edge_type": "inherent", "type": "", "uuid": "26c11007-db0f-404c-ad0e-0cfcfdc008c4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "7d077418-7875-4569-ac52-e25739785968"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "e9c63095-54f1-44e1-bfce-87e342d0c5d0"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "35799808_runbook", "uuid": "3b1c9104-8077-48be-9ac9-3619a3edece1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ea482cca-14fa-46db-9b56-1c26d6271f32"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "017e6fe9_runbook", "uuid": "92549ea5-97ff-416a-b157-01cc291fc783"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e1f830b4-f4f2-4858-b61d-9c0d69e79182"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "8fff702c-4938-4391-8e98-90e876448d82"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "43ce78cb-1d8f-4003-b96c-320b55854dc2"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "fc2c5833-13cc-432f-9eaf-e1c957d0ed08"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a65042f9-7d31-480a-97c7-eed1219edc0c"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "7d077418-7875-4569-ac52-e25739785968"}], "description": "", "name": "SYS_GEN__Runbook_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "uuid": "e9c63095-54f1-44e1-bfce-87e342d0c5d0"}, "message_list": [], "variable_list": [], "uuid": "eb0c0d61-3592-4584-8960-97b9c53281b4"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "b1f1375b-90d8-4fb3-beb9-3165ea57802c", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "432558ac-6242-4fca-ab7c-c0c046fd6d70"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "cb38d64d-e831-4b1c-a586-6cc4c843de19"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "779dab05-dc4b-4090-be2c-7ec49cc0da2d"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "a98a1085-783e-486b-b23f-0ca445710489"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "a5d8a135-7b8b-49f5-8eca-bcd0a2905fe2"}], "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "cb38d64d-e831-4b1c-a586-6cc4c843de19"}, "edge_type": "inherent", "type": "", "uuid": "f1e700d6-0d8b-4cc7-b27a-8ac0a587f09d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "779dab05-dc4b-4090-be2c-7ec49cc0da2d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "a98a1085-783e-486b-b23f-0ca445710489"}, "edge_type": "inherent", "type": "", "uuid": "75c39463-121a-4964-8b19-2397eb008565", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "uuid": "a5d8a135-7b8b-49f5-8eca-bcd0a2905fe2"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "uuid": "779dab05-dc4b-4090-be2c-7ec49cc0da2d"}, "edge_type": "inherent", "type": "", "uuid": "452f2d3d-1cf3-4779-a837-2f0a9c2005e1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "a98a1085-783e-486b-b23f-0ca445710489"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "93c86bc8-8fb6-48b6-9ec2-8d84f76e7ae7"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Service_36f81f27_181e_4d8c_a072_6672edd4ee7c", "uuid": "3e409bb6-9883-4900-a89f-5adc3f7492ec"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cb38d64d-e831-4b1c-a586-6cc4c843de19"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package", "uuid": "bf441df6-3e1b-46ef-ac74-114ebcee4651"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_7403701e_7c85_4589_aae5_6039b3451671", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "779dab05-dc4b-4090-be2c-7ec49cc0da2d"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2fc6c34d_14f2_4aac_b78d_7c1e04cc518d", "uuid": "127a8d2b-2d87-48b0-a5ef-ab74442116a4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a98a1085-783e-486b-b23f-0ca445710489"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_2c92457f_13cb_4016_aeb6_ae00343d6b3e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "a5d8a135-7b8b-49f5-8eca-bcd0a2905fe2"}], "description": "", "name": "SYS_GEN__Runbook_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_1811a803_7f15_49a4_a98f_2bf2d6f59159", "uuid": "93c86bc8-8fb6-48b6-9ec2-8d84f76e7ae7"}, "message_list": [], "variable_list": [], "uuid": "6f701acf-5925-473f-ba76-0db3dd67b1d5"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for restarting an application", "type": "system", "uuid": "b1e71bb1-f1c9-42fa-b6bf-03635d7e41c3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "432558ac-6242-4fca-ab7c-c0c046fd6d70"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "aae25504-37fd-436b-a320-875013efd5cc"}, {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "uuid": "3751c14c-0731-4138-8173-abaf308e6d05"}], "name": "SYS_GEN__Composite_DAG_Application_432558ac_6242_4fca_ab7c_c0c046fd6d70", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "aae25504-37fd-436b-a320-875013efd5cc"}, "edge_type": "inherent", "type": "", "uuid": "bda5c442-db75-48c3-b5fb-0f239081455a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "uuid": "3751c14c-0731-4138-8173-abaf308e6d05"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b4f15331-d4d9-4a5e-81fd-e55a4bf37ab6"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory", "uuid": "de35541b-3b4c-4fad-8bd0-cc22f8724239"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_de35541b_3b4c_4fad_8bd0_cc22f8724239", "uuid": "dcd47431-05f4-4977-8c68-9a5e66b34a59"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "aae25504-37fd-436b-a320-875013efd5cc"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory", "uuid": "c5a4230c-365f-4258-a38f-3f166ed4f1ff"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__restart_CRb_Service_c5a4230c_365f_4258_a38f_3f166ed4f1ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "1bd2d70a_deployment", "uuid": "db333066-7a11-411b-92e8-d0932f5e11da"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "0d16f818_runbook", "uuid": "f8d44e62-2684-408c-8143-01e038b26ba1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3751c14c-0731-4138-8173-abaf308e6d05"}], "description": "", "name": "SYS_GEN__Runbook_Application_432558ac_6242_4fca_ab7c_c0c046fd6d70", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_432558ac_6242_4fca_ab7c_c0c046fd6d70", "uuid": "b4f15331-d4d9-4a5e-81fd-e55a4bf37ab6"}, "message_list": [], "variable_list": [], "uuid": "3557f6ef-103e-4e4a-86f5-f894c50ca28b"}, "message_list": [], "name": "action_restart"}], "name": "Nutanix", "state": "ACTIVE", "message_list": [], "dependency_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "DOMAIN", "type": "LOCAL", "value": "contoso.com", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "ae35c444-2124-4fd8-8891-535f4eb15faa"}, {"val_type": "STRING", "description": "", "name": "DOMAIN_TYPE", "type": "LOCAL", "value": "CDC", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "2d679004-581b-4ab2-a530-ea78a3adc531"}, {"val_type": "STRING", "description": "", "name": "PARENT_IP", "type": "LOCAL", "value": "10.15.193.101", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "d2258dd4-8c1f-47f9-a70d-ed8ae13e3a2b"}, {"val_type": "STRING", "description": "", "name": "CHILD_DOMAIN", "type": "LOCAL", "value": "management", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "3a863410-5884-430a-925e-7d3f9b6b368b"}, {"val_type": "STRING", "description": "", "name": "STATIC_IP", "type": "LOCAL", "value": "10.15.193.105", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "58132433-9880-8024-e991-bbfc0a8cf42d"}, {"val_type": "STRING", "description": "", "name": "GATEWAY", "type": "LOCAL", "value": "10.15.193.1", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "3524202d-a97d-23b7-1f86-c4ea3d8b338d"}, {"val_type": "STRING", "description": "", "name": "PREFIX", "type": "LOCAL", "value": "24", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "db4dce6a-31e2-d391-dce0-b50299bfbf97"}], "uuid": "432558ac-6242-4fca-ab7c-c0c046fd6d70"}], "default_credential_local_reference": {"kind": "app_credential", "name": "LOCAL", "uuid": "026beee0-4a1e-470d-8345-ff031082c748"}, "type": "USER"}, "name": "AD"}, "spec": {"description": "", "resources": {"service_definition_list": [{"singleton": false, "name": "Active_Directory", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Sleep"}, {"kind": "app_task", "name": "InstallAD"}, {"kind": "app_task", "name": "Wait for VM"}, {"kind": "app_task", "name": "Firewall Ports"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Sleep"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "InstallAD"}}, {"from_task_reference": {"kind": "app_task", "name": "InstallAD"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Wait for VM"}}, {"from_task_reference": {"kind": "app_task", "name": "Wait for VM"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Firewall Ports"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "e8ae6024_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "static", "type": "", "command_line_args": "", "exit_status": [], "script": "#script\nsleep(50)"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Sleep"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "##############################################\n# Name        : ActiveDirectoryBundle.ps1\n# Author      : K Sarath Kumar\n# Version     : 1.0\n# Description : Installs and configures domain controller features AD, CDC, ADC & RODC.\n##############################################\n\n$WS2008R2_MAJOR                 = '6.1'\n$WS2012_MAJOR                   = '6.2'\n$WS2012R2_MAJOR                 = '6.3'\n$WS2016_MAJOR                   = '10.0'\n\n# -*- Checks AD Domain services Installation\nfunction Check-ActiveDirectoryFeature {\n   return $(Get-WindowsFeature AD-Domain-Services -ErrorAction SilentlyContinue).Installed\n}\n# -*- Installs AD Domain services\nfunction Install-ActiveDirectory {\n  Write-Output \"Installing AD Features.\"\n  Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools\n}\n# -*- Checks the pre existance of domain\nfunction Check-DomainExistance {\n  #if (Get-ADDomainController -Discover -ErrorAction SilentlyContinue){\n  if (\"$((wmic ComputerSystem get DomainRole)[2])\".trim() -eq \"5\"){\n   return $true\n  } else{\n    return $false\n  }\n}\n\n# -*- Configures AD Domain service\nfunction Configure-ActiveDirectory {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$false)]\n      [string]$DatabasePath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainMode,\n      [parameter(Mandatory=$true)]\n      [string]$ForestMode,\n      [parameter(Mandatory=$false)]\n      [string]$LogPath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$false)]\n      [string]$SysvolPath=\"C:\\Windows\\SYSVOL\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainType,\n      [parameter(Mandatory=$false)]\n      [string]$ChildDomainName\n  )\n  Import-Module ADDSDeployment\n\n  $secpasswd = ConvertTo-SecureString $Password -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"$DomainName\\administrator\",$secpasswd)\n  $netbios = $DomainName.Split(\".\")[0].ToUpper()\n  Write-Output \"Configuring Domain services.\"\n  switch ($DomainType){\n    \"DC\"{\n      Install-ADDSForest -CreateDnsDelegation:$false -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainName $DomainName -DomainNetbiosName $netbios -ForestMode $ForestMode -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd\n    }\n    \"ADC\"{\n      Install-ADDSDomainController -NoGlobalCatalog:$false -CreateDnsDelegation:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"CDC\"{\n      Install-ADDSDomain -NoGlobalCatalog:$false -CreateDnsDelegation:$true -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainType \"ChildDomain\" -InstallDns:$true -LogPath $LogPath -NewDomainName $ChildDomainName -NewDomainNetbiosName $ChildDomainName.ToUpper() -ParentDomainName $DomainName -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"RODC\"{\n      Install-ADDSDomainController -AllowPasswordReplicationAccountName @(\"$netbios\\Allowed RODC Password Replication Group\") -NoGlobalCatalog:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DenyPasswordReplicationAccountName @(\"BUILTIN\\Administrators\", \"BUILTIN\\Server Operators\", \"BUILTIN\\Backup Operators\", \"BUILTIN\\Account Operators\", \"$netbios\\Denied RODC Password Replication Group\") -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -ReadOnlyReplica:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    default{\n      Write-Output \"Invalid DomainType\"\n    }\n}\n}\n# -*- Cheking Exitance of Active directory Feature.\nif (Check-ActiveDirectoryFeature){\n  Write-Output \"Active Directory already installed.\"\n} else{\n  Install-ActiveDirectory\n}\n\nif (Check-DomainExistance){\n  Write-Output \"Domain exists already.\"\n} else{\n  $MajorOSVersion= [string](Get-WmiObject Win32_OperatingSystem | Select-Object @{n=\"Major\";e={($_.Version.Split(\".\")[0]+\".\"+$_.Version.Split(\".\")[1])}}).Major\n  if ($MajorOSVersion -eq $WS2012R2_MAJOR){\n    $DomainMode = \"Win2012R2\"\n  } elseif ($MajorOSVersion -eq $WS2016_MAJOR){\n    $DomainMode = \"WinThreshold\"\n  }\n  Configure-ActiveDirectory -DomainName \"@@{DOMAIN}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -DomainMode $DomainMode -ForestMode $DomainMode -DomainType \"@@{DOMAIN_TYPE}@@\" -ChildDomainName \"@@{CHILD_DOMAIN}@@\"\n}\nStart-Sleep -Seconds 5\n\nRestart-Computer -Force -AsJob\nexit 0"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "InstallAD"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "static", "type": "", "command_line_args": "", "exit_status": [], "script": "#script\nsleep(90)"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Wait for VM"}, {"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "New-NetFirewallRule -DisplayName \"AD\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 389 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"GC TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 3268 -Action allow\nNew-NetFirewallRule -DisplayName \"GC UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 3269 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 139 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 138 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 88 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE TCP\" -Direction Inbound \u2013Protocol TCP \u2013LocalPort 464 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE UDP\" -Direction Inbound \u2013Protocol UDP \u2013LocalPort 464 -Action allow"}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Firewall Ports"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "e8ae6024_dag"}, "name": "170603f6_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes created VMs as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "f25e9ca6_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "f25e9ca6_dag"}, "name": "017e6fe9_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "7cd4b387_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "7cd4b387_dag"}, "name": "73434119_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "83f2a218_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "83f2a218_dag"}, "name": "35799808_runbook"}}, {"critical": false, "type": "system", "description": "System action for restarting an application", "name": "action_restart", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Active_Directory"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "7078cac1_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "7078cac1_dag"}, "name": "0d16f818_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [], "depends_on_list": []}], "substrate_definition_list": [{"description": "", "action_list": [], "readiness_probe": {"connection_type": "POWERSHELL", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "disable_readiness_probe": false, "timeout_secs": "300", "connection_port": 5985}, "editables": {"readiness_probe": {"connection_type": true, "connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"ip_endpoint_list": {"0": {"ip": true}}, "subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"0": {"data_source_reference": true, "device_properties": {"disk_address": {"adapter_type": true}, "device_type": true}}}}}}, "os_type": "Windows", "type": "AHV_VM", "create_spec": {"name": "AD-CDC02", "categories": "", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [{"ip": "@@{STATIC_IP}@@", "type": "ASSIGNED"}], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "cdcb4580-54b3-4efc-9d6d-c23d3e51c3ea"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 1, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": null, "type": "", "sysprep": {"install_type": "PREPARED", "unattend_xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-TCPIP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <Interfaces>\n            <Interface wcm:action=\"add\">\n               <Identifier>Ethernet</Identifier>\n               <Ipv4Settings>\n                  <DhcpEnabled>false</DhcpEnabled>\n                  <RouterDiscoveryEnabled>true</RouterDiscoveryEnabled>\n                  <Metric>30</Metric>\n               </Ipv4Settings>\n               <UnicastIpAddresses>\n                  <IpAddress wcm:action=\"add\" wcm:keyValue=\"1\">@@{STATIC_IP}@@/@@{PREFIX}@@</IpAddress>\n               </UnicastIpAddresses>\n               <Routes>\n                  <Route wcm:action=\"add\">\n                     <Identifier>10</Identifier>\n                     <Metric>20</Metric>\n                     <NextHopAddress>@@{GATEWAY}@@</NextHopAddress>\n                     <Prefix>0.0.0.0/0</Prefix>\n                  </Route>\n               </Routes>\n            </Interface>\n         </Interfaces>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false</fDenyTSConnections>\n      </component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0</UserAuthentication>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true</Active>\n               <Profile>all</Profile>\n               <Group>@FirewallAPI.dll,-28752</Group>\n            </FirewallGroup>\n         </FirewallGroups>\n      </component>\n   </settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </AdministratorPassword>\n         </UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@</Value>\n               <PlainText>true</PlainText>\n            </Password>\n            <Enabled>true</Enabled>\n            <Username>Administrator</Username>\n         </AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe /c netsh firewall add portopening TCP 5985 \"Port 5985\"</CommandLine>\n               <Description>Win RM port open</Description>\n               <Order>1</Order>\n               <RequiresUserInput>true</RequiresUserInput>\n            </SynchronousCommand>\n         </FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true</HideEULAPage>\n            <SkipMachineOOBE>true</SkipMachineOOBE>\n         </OOBE>\n      </component>\n      <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US</InputLocale>\n         <SystemLocale>en-US</SystemLocale>\n         <UILanguageFallback>en-us</UILanguageFallback>\n         <UILanguage>en-US</UILanguage>\n         <UserLocale>en-US</UserLocale>\n      </component>\n   </settings>\n</unattend>", "type": ""}}, "power_state": "ON", "type": "", "boot_config": {"boot_device": {"type": "", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}, "type": "", "mac_address": ""}, "disk_list": [{"data_source_reference": {"kind": "image", "type": "", "name": "WindowsServer2016-Base", "uuid": "7833ea8b-3bed-4955-9c3c-919b52581ea5"}, "type": "", "disk_size_mib": 0, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}}]}}, "variable_list": [], "name": "ActiveDirectory"}], "credential_definition_list": [{"username": "administrator", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "PASSWORD", "name": "LOCAL"}, {"username": "administrator@contoso.com", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "PASSWORD", "name": "DOMAIN_CRED"}], "package_definition_list": [{"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "Active_Directory"}], "version": "", "type": "DEB", "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Set Hostname"}], "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "80dbbb84_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"script_type": "sh", "type": "", "command_line_args": "", "exit_status": [], "script": "##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n$HOSTNAME = \"@@{name}@@\"\nfunction Set-Hostname{\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$Hostname\n)\n  if ($Hostname -eq  $(hostname)){\n    Write-Output \"Hostname already set.\"\n  }\n  else{\n    Rename-Computer -NewName $HOSTNAME -ErrorAction Stop\n  }\n}\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif ($HOSTNAME -ne $Null){\n  Write-Output \"Setting Hostname\"\n  Set-Hostname -Hostname $HOSTNAME\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n#Restart-Computer -Force -AsJob\nshutdown.exe /r /t 5\nexit 0"}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "Set Hostname"}], "description": "", "state": "ACTIVE", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "80dbbb84_dag"}, "name": "5c108f0d_runbook"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "Active_Directory_Package"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [], "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "6f292b4a_dag"}], "description": "", "state": "ACTIVE", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "6f292b4a_dag"}, "name": "1f35f88e_runbook"}}, "variable_list": [], "name": "Active_Directory_Package"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "Active_Directory_Package"}], "min_replicas": "1", "max_replicas": "1", "substrate_local_reference": {"kind": "app_substrate", "name": "ActiveDirectory"}, "type": "GREENFIELD", "variable_list": [], "name": "1bd2d70a_deployment"}], "variable_list": [{"val_type": "STRING", "description": "", "value": "contoso.com", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "DOMAIN"}, {"val_type": "STRING", "description": "", "value": "CDC", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "DOMAIN_TYPE"}, {"val_type": "STRING", "description": "", "value": "10.15.193.101", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PARENT_IP"}, {"val_type": "STRING", "description": "", "value": "management", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CHILD_DOMAIN"}, {"val_type": "STRING", "description": "", "value": "10.15.193.105", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "STATIC_IP"}, {"val_type": "STRING", "description": "", "value": "10.15.193.1", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "GATEWAY"}, {"val_type": "STRING", "description": "", "value": "24", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PREFIX"}], "description": "", "action_list": [], "name": "Nutanix"}], "default_credential_local_reference": {"kind": "app_credential", "name": "LOCAL"}, "type": "USER", "client_attrs": {"Active_Directory": {"y": 220, "x": 500}}}, "name": "AD"}, "api_version": "3.0", "metadata": {"last_update_time": "1528710329033021", "creation_time": "1528286375869046", "kind": "blueprint", "spec_version": 32, "name": "AD"}}